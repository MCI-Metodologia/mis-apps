<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CompaÃ±Ã­a Diaria Silver / M.C.I. - Serie OriÃ³n</title>
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESET Y VARIABLES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --fs: 22px;
            --verde:    #00b894;
            --verde2:   #00cec9;
            --azul:     #0984e3;
            --azul2:    #74b9ff;
            --gris-btn: #708090;
            --titulo:   #5a5a5a;
            --texto:    #2d3436;
        }
        body {
            font-family: Arial, sans-serif;
            font-size: var(--fs);
            line-height: 1.7;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            min-height: 100vh;
            padding: 15px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            border-radius: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SETUP SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .setup-screen { padding: 40px 25px; text-align: center; display: none; background: #f8f9fa; }
        .setup-screen.active { display: block; }
        .setup-screen .clara-wrap { margin: 15px auto; }
        .clara-img-big {
            width: 180px; height: 180px; border-radius: 50%;
            object-fit: cover; border: 5px solid var(--verde);
            box-shadow: 0 6px 24px rgba(0,184,148,0.3);
            display: block; margin: 0 auto;
        }
        .setup-screen h1 { color: var(--titulo); font-size: 1.85em; margin: 18px 0 8px; line-height: 1.3; }
        .setup-screen > p { font-size: 1.1em; color: #555; }
        .setup-form {
            background: #fff; padding: 28px; border-radius: 15px;
            margin: 22px 0; text-align: left;
            border: 2px solid #e0e0e0;
        }
        .setup-form label { display: block; font-size: 1.1em; font-weight: bold; color: var(--texto); margin: 16px 0 7px; }
        .setup-form input, .setup-form select {
            width: 100%; padding: 14px; font-size: 1.05em;
            border: 2px solid #dfe6e9; border-radius: 10px;
            font-family: Arial, sans-serif; color: var(--texto); background: #fff;
        }
        .setup-form input:focus, .setup-form select:focus { outline: none; border-color: var(--verde); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        header {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: #fff; padding: 18px 22px 16px; text-align: center; position: relative;
        }
        .header-top {
            display: flex; justify-content: flex-end; align-items: center;
            gap: 6px; margin-bottom: 8px;
        }
        .font-label { color: rgba(255,255,255,0.85); font-size: 0.88em; margin-right: 3px; }
        .font-btn {
            background: rgba(255,255,255,0.22); color: #fff;
            border: 2px solid rgba(255,255,255,0.55); border-radius: 8px;
            padding: 5px 14px; font-size: 1em; font-weight: bold;
            cursor: pointer; font-family: Arial, sans-serif; transition: background 0.2s;
            min-height: 36px;
        }
        .font-btn:hover { background: rgba(255,255,255,0.38); }
        header h1 { font-size: 1.75em; margin-bottom: 4px; line-height: 1.25; font-weight: bold; }
        header p { font-size: 1em; opacity: 0.9; }
        .serie-badge {
            display: inline-block; background: rgba(255,255,255,0.18);
            border: 1px solid rgba(255,255,255,0.45); color: #fff;
            font-size: 0.78em; font-weight: bold; padding: 3px 14px;
            border-radius: 20px; margin-top: 8px; letter-spacing: 1px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SALUDO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .greeting {
            background: #fff8e7; padding: 22px 25px 18px;
            text-align: center; border-bottom: 3px solid #ffc107;
        }
        .clara-img-sm {
            width: 120px; height: 120px; border-radius: 50%;
            object-fit: cover; border: 4px solid var(--verde);
            box-shadow: 0 4px 14px rgba(0,184,148,0.22);
            display: block; margin: 0 auto 12px;
        }
        .greeting h2 { font-size: 1.7em; color: var(--titulo); margin-bottom: 5px; }
        .greeting .fecha { font-size: 1em; color: #666; margin-bottom: 8px; }
        .racha-pill {
            display: inline-block;
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: #fff; font-size: 0.95em; font-weight: bold;
            padding: 6px 20px; border-radius: 25px; margin-top: 4px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ALERTAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .reminders-alert {
            background: #d1f2eb; border-left: 6px solid var(--verde);
            padding: 18px 20px; margin: 16px 20px; border-radius: 10px; display: none;
        }
        .reminders-alert.show { display: block; }
        .reminders-alert h3 { color: #00796b; font-size: 1.25em; margin-bottom: 10px; }
        .reminder-item {
            background: #fff; padding: 11px 14px; margin: 7px 0;
            border-radius: 8px; font-size: 0.98em; color: var(--texto);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• POPUP LOGROS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .achievement-popup {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, var(--verde) 0%, var(--verde2) 100%);
            color: #fff; padding: 38px 32px; border-radius: 22px;
            text-align: center; z-index: 9999;
            box-shadow: 0 15px 50px rgba(0,0,0,0.35);
            transition: transform 0.35s cubic-bezier(0.175,0.885,0.32,1.275);
            max-width: 88%; width: 400px;
        }
        .achievement-popup.show { transform: translate(-50%, -50%) scale(1); }
        .achievement-popup .icon { font-size: 3.5em; margin-bottom: 12px; }
        .achievement-popup h3 { font-size: 1.6em; margin-bottom: 10px; }
        .achievement-popup p { font-size: 1.05em; margin-bottom: 20px; opacity: 0.95; }
        .achievement-popup button {
            background: #fff; color: var(--verde); border: none;
            padding: 12px 28px; border-radius: 10px; font-size: 1.05em;
            font-weight: bold; font-family: Arial, sans-serif; cursor: pointer;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MODALES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.55); z-index: 8888;
            display: none; align-items: center; justify-content: center; padding: 20px;
        }
        .modal-overlay.show { display: flex; }
        .modal-box {
            background: #fff; border-radius: 18px; padding: 28px 26px;
            max-width: 560px; width: 100%; max-height: 80vh;
            overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .modal-box h3 { color: var(--titulo); font-size: 1.45em; margin-bottom: 14px; }
        .modal-box p { font-size: 0.92em; color: #444; line-height: 1.65; margin-bottom: 10px; }
        .modal-close {
            background: var(--gris-btn); color: #fff; border: none;
            padding: 11px 26px; border-radius: 10px; font-size: 1em;
            font-family: Arial, sans-serif; cursor: pointer; margin-top: 14px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MENÃš PRINCIPAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-menu {
            padding: 25px 18px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }
        .menu-button {
            background: linear-gradient(135deg, var(--azul2) 0%, var(--azul) 100%);
            color: #fff; border: none; border-radius: 18px;
            padding: 26px 18px; font-size: 1.15em; font-weight: bold;
            font-family: Arial, sans-serif; cursor: pointer; transition: all 0.25s;
            text-align: center; box-shadow: 0 4px 14px rgba(9,132,227,0.22);
            min-height: 105px;
        }
        .menu-button:hover { transform: translateY(-4px); box-shadow: 0 8px 22px rgba(9,132,227,0.35); }
        .menu-button.verde {
            background: linear-gradient(135deg, var(--verde) 0%, var(--verde2) 100%);
            box-shadow: 0 4px 14px rgba(0,184,148,0.22);
        }
        .menu-button.verde:hover { box-shadow: 0 8px 22px rgba(0,184,148,0.35); }
        .menu-button.gris { background: var(--gris-btn); box-shadow: 0 4px 14px rgba(112,128,144,0.22); }
        .menu-button.gris:hover { background: #5a6a7a; }
        .menu-button .icon { font-size: 2.1em; display: block; margin-bottom: 9px; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIONES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .content-section { padding: 28px 22px; display: none; animation: fadeUp 0.4s ease; }
        .content-section.active { display: block; }
        @keyframes fadeUp { from { opacity:0; transform:translateY(18px); } to { opacity:1; transform:translateY(0); } }
        .back-button {
            background: var(--gris-btn); color: #fff; border: none;
            border-radius: 12px; padding: 12px 24px; font-size: 1em;
            font-family: Arial, sans-serif; cursor: pointer;
            margin-bottom: 22px; font-weight: bold; min-height: 50px;
        }
        .back-button:hover { background: #5a6a7a; }
        h2 { color: var(--titulo); font-size: 1.8em; margin-bottom: 18px; text-align: center; }
        h3 { color: var(--texto); font-size: 1.4em; margin: 18px 0 10px; }
        p { font-size: 1em; color: #444; margin-bottom: 12px; line-height: 1.75; }
        .card {
            background: #f8f9fa; border-radius: 15px; padding: 20px;
            margin: 15px 0; border-left: 6px solid var(--azul);
        }
        .card.verde-card { border-left-color: var(--verde); }
        .card.dorado-card { border-left-color: #f9ca24; background: #fffde7; }
        .card.rojo-card { border-left-color: #d63031; }
        .card.gris-card { border-left-color: var(--gris-btn); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• BOTONES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .primary-button {
            background: linear-gradient(135deg, var(--verde) 0%, var(--verde2) 100%);
            color: #fff; border: none; border-radius: 12px;
            padding: 16px 36px; font-size: 1.1em; font-weight: bold;
            font-family: Arial, sans-serif; cursor: pointer;
            display: block; width: 100%; margin: 13px 0; min-height: 54px;
            transition: opacity 0.2s;
        }
        .primary-button:hover { opacity: 0.88; }
        .secondary-button {
            background: var(--gris-btn); color: #fff; border: none;
            border-radius: 10px; padding: 11px 22px; font-size: 0.98em;
            font-family: Arial, sans-serif; cursor: pointer; margin: 6px 4px;
            min-height: 46px; transition: background 0.2s;
        }
        .secondary-button:hover { background: #5a6a7a; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ÃNIMO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .mood-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 11px; margin: 18px 0;
        }
        .mood-button {
            background: #fff; border: 3px solid #dfe6e9; border-radius: 14px;
            padding: 15px 8px; font-size: 1em; font-family: Arial, sans-serif;
            cursor: pointer; transition: all 0.22s; text-align: center;
            color: var(--texto); min-height: 90px;
        }
        .mood-button:hover { border-color: var(--azul); background: #e3f2fd; }
        .mood-button.selected { background: var(--azul); color: #fff; border-color: var(--azul); }
        .mood-button .emoji { font-size: 2.1em; display: block; margin-bottom: 6px; }
        .mood-response {
            background: #e8f5e9; border-left: 5px solid var(--verde);
            padding: 14px 18px; border-radius: 10px; margin-top: 14px;
            font-size: 1em; color: var(--texto); display: none; line-height: 1.7;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DIARIO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .pregunta-disp {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border: 2px solid #f9ca24; border-radius: 13px;
            padding: 16px 18px; margin: 15px 0; text-align: center;
        }
        .pregunta-disp .pd-label { font-size: 0.88em; font-weight: bold; color: #5a5a5a; margin-bottom: 6px; }
        .pregunta-disp .pd-text { font-size: 1.1em; font-style: italic; color: var(--texto); font-weight: bold; line-height: 1.6; }
        .journal-area textarea {
            width: 100%; min-height: 220px; font-size: 1em;
            padding: 14px; border: 2px solid #dfe6e9; border-radius: 12px;
            font-family: Arial, sans-serif; line-height: 1.7;
            resize: vertical; color: var(--texto); background: #fff;
        }
        .journal-area textarea:focus { outline: none; border-color: var(--verde); }
        .saved-msg {
            background: #d4edda; color: #155724; padding: 14px;
            border-radius: 10px; margin-top: 12px; font-size: 1em;
            font-weight: bold; text-align: center; display: none;
        }
        .saved-msg.show { display: block; animation: fadeUp 0.4s; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RECORDATORIOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .reminder-form { background: #f0f4f8; padding: 18px; border-radius: 12px; margin: 13px 0; }
        .reminder-form input, .reminder-form select {
            width: 100%; padding: 12px 13px; margin: 5px 0; font-size: 0.98em;
            border: 2px solid #dfe6e9; border-radius: 9px;
            font-family: Arial, sans-serif; background: #fff; color: var(--texto);
        }
        .reminder-form input:focus { outline: none; border-color: var(--verde); }
        .reminder-list { margin: 13px 0; }
        .reminder-list-item {
            background: #fff; border: 2px solid #e0e0e0; padding: 14px 16px;
            margin: 8px 0; border-radius: 12px;
            display: flex; justify-content: space-between; align-items: center; gap: 10px;
        }
        .reminder-list-item > div { font-size: 0.98em; color: var(--texto); line-height: 1.5; }
        .delete-button {
            background: #d63031; color: #fff; border: none;
            padding: 8px 16px; border-radius: 8px; cursor: pointer;
            font-size: 0.92em; font-family: Arial, sans-serif; white-space: nowrap; min-height: 40px;
        }
        .delete-button:hover { background: #b71c1c; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUOTE BOX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .quote-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 22px; border-radius: 14px; margin: 16px 0;
            text-align: center; font-size: 1.1em; font-style: italic;
            color: var(--texto); border: 3px solid #f9ca24; line-height: 1.7;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CARTELERA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .cart-nav { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 18px; justify-content: center; }
        .cart-tab {
            background: #e9ecef; color: var(--texto);
            border: 2px solid #dee2e6; border-radius: 30px;
            padding: 10px 20px; font-size: 0.95em; font-family: Arial, sans-serif;
            cursor: pointer; font-weight: bold; transition: all 0.2s; min-height: 46px;
        }
        .cart-tab.active, .cart-tab:hover {
            background: linear-gradient(135deg, var(--verde) 0%, var(--verde2) 100%);
            color: #fff; border-color: var(--verde);
        }
        .cart-panel { display: none; }
        .cart-panel.active { display: block; animation: fadeUp 0.3s; }
        .cart-controls {
            display: flex; justify-content: space-between; align-items: center;
            flex-wrap: wrap; gap: 10px; margin-bottom: 14px;
        }
        .cart-label { font-size: 0.9em; font-weight: bold; color: #666; }
        .cart-btns { display: flex; gap: 8px; flex-wrap: wrap; }
        .rand-btn {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: #fff; border: none; border-radius: 10px;
            padding: 9px 18px; font-size: 0.92em; font-family: Arial, sans-serif;
            cursor: pointer; font-weight: bold; min-height: 42px;
        }

        /* Crucigrama */
        .cruci-wrap { text-align: center; }
        .cruci-grid {
            display: inline-grid; gap: 5px; margin: 14px auto;
            padding: 12px; background: #708090; border-radius: 12px;
        }
        .cruz-cell {
            width: 58px; height: 58px; background: #fff; border: none;
            border-radius: 7px; text-align: center; font-size: 1.4em;
            font-weight: bold; font-family: Arial, sans-serif; color: var(--texto);
            text-transform: uppercase; outline: none; transition: background 0.15s; cursor: text;
        }
        .cruz-cell:focus { background: #e3f2fd; box-shadow: 0 0 0 3px var(--verde); }
        .cruz-cell.bloq { background: #4a5a6a; cursor: default; }
        .cruz-cell.ok   { background: #d4edda; color: #155724; }
        .cruz-cell.err  { background: #f8d7da; color: #721c24; }
        .pistas-wrap { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-top: 14px; text-align: left; }
        .pistas-wrap h4 { font-size: 1em; font-weight: bold; color: var(--titulo); margin-bottom: 7px; }
        .pista-line { font-size: 0.95em; color: #444; margin: 5px 0; line-height: 1.5; }
        .cruci-res {
            padding: 12px; border-radius: 10px; margin-top: 11px;
            font-size: 1em; font-weight: bold; text-align: center; display: none;
        }
        .cruci-res.ok  { background: #d4edda; color: #155724; display: block; }
        .cruci-res.err { background: #fff3cd; color: #856404; display: block; }

        /* Gimnasia */
        .gimn-card {
            background: #f0f8ff; border: 2px solid var(--azul2);
            border-radius: 16px; padding: 26px 20px; text-align: center; margin: 13px 0;
        }
        .gimn-tipo { font-size: 0.9em; font-weight: bold; color: var(--azul); margin-bottom: 10px; }
        .gimn-ejercicio { font-size: 1.2em; font-weight: bold; color: var(--texto); line-height: 1.65; }

        /* SabÃ­as QuÃ© */
        .sabias-card {
            background: #fff8e1; border: 2px solid #f9ca24;
            border-radius: 16px; padding: 26px 20px; text-align: center; margin: 13px 0;
        }
        .sabias-icon { font-size: 3em; margin-bottom: 12px; }
        .sabias-texto { font-size: 1.1em; color: var(--texto); line-height: 1.75; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SOCIAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .social-buttons { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin: 16px 0; }
        .btn-wa {
            background: #25d366; color: #fff; border: none;
            border-radius: 13px; padding: 13px 22px; font-size: 1em;
            font-family: Arial, sans-serif; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; gap: 8px;
            text-decoration: none; transition: all 0.2s; min-height: 50px;
        }
        .btn-wa:hover { background: #1da851; transform: translateY(-2px); }
        .btn-ig {
            background: linear-gradient(135deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            color: #fff; border: none; border-radius: 13px;
            padding: 13px 22px; font-size: 1em; font-family: Arial, sans-serif;
            font-weight: bold; cursor: pointer; display: flex;
            align-items: center; gap: 8px; text-decoration: none;
            transition: all 0.2s; min-height: 50px;
        }
        .btn-ig:hover { opacity: 0.9; transform: translateY(-2px); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        footer { background: #f8f9fa; padding: 26px 22px; text-align: center; border-top: 3px solid #dfe6e9; }
        footer p { font-size: 0.95em; color: #6c757d; margin-bottom: 8px; line-height: 1.65; }
        footer a { color: var(--azul); cursor: pointer; text-decoration: none; }
        footer a:hover { text-decoration: underline; }
        .aviso-medico {
            background: #fff5f5; border: 2px solid #ffcdd2;
            border-radius: 12px; padding: 15px 17px; margin: 15px 0;
            font-size: 0.85em; line-height: 1.65; color: #c62828; text-align: left;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EXPORT BOX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .export-box { background: #f0f4f8; border-radius: 12px; padding: 15px; margin: 12px 0; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESPONSIVE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 768px) {
            body { font-size: 20px; padding: 8px; }
            header h1 { font-size: 1.45em; }
            h2 { font-size: 1.5em; }
            .main-menu { grid-template-columns: 1fr 1fr; gap: 11px; }
            .cruz-cell { width: 46px; height: 46px; font-size: 1.2em; }
            .pistas-wrap { grid-template-columns: 1fr; }
            .mood-selector { grid-template-columns: repeat(3, 1fr); }
        }
        @media (max-width: 420px) {
            .main-menu { grid-template-columns: 1fr; }
            .cruz-cell { width: 38px; height: 38px; font-size: 1.05em; }
            .mood-selector { grid-template-columns: repeat(2, 1fr); }
            .social-buttons { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
<div class="container">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SETUP SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="setup-screen" class="setup-screen active">
    <div class="clara-wrap">
        <img src="clara-celeste.jpg" alt="Clara, tu compaÃ±era virtual" class="clara-img-big"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display:none; font-size:5em;">ğŸ‘©â€âš•ï¸</div>
    </div>
    <h1>Â¡Bienvenido/a a CompaÃ±Ã­a Diaria Silver / M.C.I. - Serie OriÃ³n!</h1>
    <p>Soy Clara, tu compaÃ±era virtual de cada dÃ­a</p>
    <div class="setup-form">
        <label for="user-name">Â¿CÃ³mo te llamÃ¡s?</label>
        <input type="text" id="user-name" placeholder="IngresÃ¡ tu nombre">
        <label for="user-country">Â¿En quÃ© paÃ­s vivÃ­s?</label>
        <select id="user-country">
            <option value="">SeleccionÃ¡ tu paÃ­s</option>
            <option value="AR">Argentina</option>
            <option value="UY">Uruguay</option>
            <option value="CL">Chile</option>
            <option value="PY">Paraguay</option>
            <option value="BO">Bolivia</option>
            <option value="PE">PerÃº</option>
            <option value="EC">Ecuador</option>
            <option value="CO">Colombia</option>
            <option value="VE">Venezuela</option>
            <option value="MX">MÃ©xico</option>
            <option value="ES">EspaÃ±a</option>
            <option value="OTHER">Otro</option>
        </select>
        <button class="primary-button" onclick="completeSetup()" style="margin-top:22px;">
            ğŸŒŸ Comenzar mi viaje con Clara
        </button>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     APP PRINCIPAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="main-app" style="display:none;">

    <!-- HEADER -->
    <header>
        <div class="header-top">
            <span class="font-label">Letra:</span>
            <button class="font-btn" onclick="cambiarFuente(-1)" title="Texto mÃ¡s pequeÃ±o">Aâˆ’</button>
            <button class="font-btn" onclick="cambiarFuente(1)"  title="Texto mÃ¡s grande">A+</button>
        </div>
        <h1 style="font-size: 2.2em; margin: 15px 0 10px; font-weight: bold;">COMPAÃ‘ÃA DIARIA SILVER</h1>
        <p style="font-size: 0.95em; margin-bottom: 5px;">Tu acompaÃ±amiento de cada dÃ­a</p>
        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 12px;">
            <img src="https://raw.githubusercontent.com/MCI-Metodologia/mis-apps/main/logo-mci.png" alt="MCI" style="height: 40px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));" onerror="this.style.display='none'">
            <span style="font-size: 1em; font-weight: bold;">M.C.I. â€¢ Serie OriÃ³n</span>
        </div>
    </header>

    <!-- SALUDO -->
    <div class="greeting">
        <img src="clara-celeste.jpg" alt="Clara" class="clara-img-sm"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display:none; font-size:4em; margin-bottom:10px;">ğŸ‘©â€âš•ï¸</div>
        <h2 id="greeting-text">Â¡Buenos dÃ­as!</h2>
        <p class="fecha" id="current-date"></p>
        <div class="racha-pill" id="racha-pill">ğŸ”¥ Llevas 1 dÃ­a conectÃ¡ndote con Clara</div>
    </div>

    <!-- BANNER ABUNDANCIA DIARIA -->
    <div style="background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); padding: 20px; text-align: center; border-bottom: 3px solid #f0ad4e;">
        <div style="font-size: 0.9em; color: #856404; font-weight: bold; margin-bottom: 5px;">
            ğŸ’« AfirmaciÃ³n del DÃ­a
        </div>
        <div id="abundancia-texto" style="font-size: 1.3em; color: #2d3436; font-weight: bold; font-style: italic;">
            <!-- Se llena con JavaScript -->
        </div>
    </div>

    <!-- BANNER RECORDATORIOS -->
    <div id="reminders-alert" class="reminders-alert">
        <h3>â° Tus recordatorios de hoy:</h3>
        <div id="today-reminders-list"></div>
    </div>

    <!-- POPUP LOGROS -->
    <div id="achievement-popup" class="achievement-popup">
        <div class="icon">ğŸ‰</div>
        <h3 id="ach-title"></h3>
        <p id="ach-msg"></p>
        <button onclick="closeAchievement()">Â¡Gracias, Clara!</button>
    </div>

    <!-- MODAL TÃ‰RMINOS -->
    <div id="modal-terms" class="modal-overlay">
        <div class="modal-box">
            <h3>ğŸ“‹ TÃ©rminos y Condiciones</h3>
            <p><strong>CompaÃ±Ã­a Diaria Silver / M.C.I. - Serie OriÃ³n</strong></p>
            <p>Esta aplicaciÃ³n es una herramienta de estimulaciÃ³n cognitiva y acompaÃ±amiento emocional para adultos mayores, desarrollada por MCI MetodologÃ­a de Conciencia Integral.</p>
            <p><strong>Uso permitido:</strong> Personal y no comercial. Queda prohibida la redistribuciÃ³n, modificaciÃ³n o venta sin autorizaciÃ³n expresa de MCI.</p>
            <p><strong>LimitaciÃ³n de responsabilidad:</strong> Esta aplicaciÃ³n NO es un dispositivo mÃ©dico y NO reemplaza el diagnÃ³stico o tratamiento profesional. Los usuarios asumen plena responsabilidad por el uso de la aplicaciÃ³n.</p>
            <p><strong>Datos personales:</strong> Todos los datos se almacenan exclusivamente en el dispositivo del usuario (localStorage). No se transmite informaciÃ³n a servidores externos.</p>
            <p><strong>Propiedad intelectual:</strong> Todo el contenido, diseÃ±o e identidad de marca son propiedad de MCI MetodologÃ­a de Conciencia Integral Â© 2026.</p>
            <button class="modal-close" onclick="closeModal('modal-terms')">Cerrar</button>
        </div>
    </div>

    <!-- MODAL PRIVACIDAD -->
    <div id="modal-privacy" class="modal-overlay">
        <div class="modal-box">
            <h3>ğŸ”’ PolÃ­tica de Privacidad</h3>
            <p><strong>Â¿QuÃ© datos guardamos?</strong><br>Solo en su dispositivo (localStorage): nombre, paÃ­s, recordatorios de medicamentos, citas, contactos, cumpleaÃ±os y entradas de diario.</p>
            <p><strong>Â¿Compartimos sus datos?</strong><br>No. NingÃºn dato es enviado a servidores externos. Todo permanece en su dispositivo.</p>
            <p><strong>Â¿Puede eliminar sus datos?</strong><br>SÃ­. En cualquier momento desde la secciÃ³n "Mis Datos" puede exportar, importar o eliminar todo.</p>
            <p><strong>Cookies:</strong> Esta aplicaciÃ³n no utiliza cookies de seguimiento ni publicidad.</p>
            <p><strong>Contacto:</strong> Instagram @metodologia.mci</p>
            <button class="modal-close" onclick="closeModal('modal-privacy')">Cerrar</button>
        </div>
    </div>

    <!-- MENÃš PRINCIPAL -->
    <div id="main-menu" class="main-menu">
        <button class="menu-button" onclick="showSection('chat')">
            <span class="icon">ğŸ’¬</span>Conversemos
        </button>
        <button class="menu-button" onclick="showSection('journal')">
            <span class="icon">ğŸ“</span>Mi Diario
        </button>
        <button class="menu-button verde" onclick="showSection('cartelera')">
            <span class="icon">ğŸ¯</span>Cartelera Diaria
        </button>
        <button class="menu-button" onclick="showSection('reminders-config')">
            <span class="icon">â°</span>Mis Recordatorios
        </button>
        <button class="menu-button" onclick="showSection('memories')">
            <span class="icon">ğŸ’­</span>Mis Recuerdos
        </button>
        <button class="menu-button" onclick="showSection('relax')">
            <span class="icon">ğŸŒ¸</span>RelajaciÃ³n
        </button>
        <button class="menu-button" onclick="showLuz()" style="background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); color: #2d3436;">
            <span class="icon">ğŸ’«</span>Momento de Luz
        </button>
        <button class="menu-button gris" onclick="showSection('config')">
            <span class="icon">âš™ï¸</span>Mis Datos
        </button>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: CONVERSEMOS â•â•â•â• -->
    <div id="chat" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>ğŸ’¬ Conversemos un poco</h2>
        <div id="weekly-quote" class="quote-box"></div>
        <div class="card">
            <h3>Â¿CÃ³mo te sentÃ­s hoy?</h3>
            <div class="mood-selector">
                <button class="mood-button" onclick="selectMood('excelente',this)"><span class="emoji">ğŸ˜Š</span>Muy bien</button>
                <button class="mood-button" onclick="selectMood('bien',this)"><span class="emoji">ğŸ™‚</span>Bien</button>
                <button class="mood-button" onclick="selectMood('regular',this)"><span class="emoji">ğŸ˜</span>Regular</button>
                <button class="mood-button" onclick="selectMood('triste',this)"><span class="emoji">ğŸ˜”</span>Triste</button>
                <button class="mood-button" onclick="selectMood('solo',this)"><span class="emoji">ğŸ˜¢</span>Solo/a</button>
            </div>
            <div id="mood-response" class="mood-response"></div>
        </div>
        <div class="card">
            <h3>Preguntas para reflexionar</h3>
            <p><strong>â€¢ Â¿QuÃ© cosa buena te pasÃ³ esta semana?</strong></p>
            <p><strong>â€¢ Â¿A quiÃ©n te gustarÃ­a llamar o visitar?</strong></p>
            <p><strong>â€¢ Â¿QuÃ© recuerdo lindo vino a tu mente hoy?</strong></p>
            <p><strong>â€¢ Â¿Hay algo que te gustarÃ­a hacer maÃ±ana?</strong></p>
        </div>
        <div class="social-buttons">
            <a id="btn-wa-chat" href="#" target="_blank" class="btn-wa">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                Compartir con un amigo
            </a>
            <a href="https://www.instagram.com/metodologia.mci/" target="_blank" class="btn-ig">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                Seguinos en Instagram
            </a>
        </div>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: MI DIARIO â•â•â•â• -->
    <div id="journal" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>ğŸ“ Mi Diario Personal</h2>
        <p style="text-align:center;">Este es tu espacio privado, <strong id="journal-name"></strong>. EscribÃ­ lo que quieras: tus pensamientos, sentimientos o recuerdos.</p>
        <div class="pregunta-disp">
            <div class="pd-label">âœ¨ Pregunta del dÃ­a para inspirarte:</div>
            <div class="pd-text" id="pd-text"></div>
        </div>
        <div class="journal-area">
            <textarea id="journal-text" placeholder="Hoy me siento...

Estuve pensando en...

Me gustarÃ­a..."></textarea>
            <button class="primary-button" onclick="saveJournal()">ğŸ’¾ Guardar mi escrito</button>
            <div id="save-message" class="saved-msg">âœ“ Clara guardÃ³ tu escrito con Ã©xito</div>
        </div>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: CARTELERA DIARIA â•â•â•â• -->
    <div id="cartelera" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>ğŸ¯ Cartelera Diaria</h2>
        <p style="text-align:center; color:#666; margin-bottom:16px;">Actividades especiales para mantener tu mente activa cada dÃ­a</p>
        <div class="cart-nav">
            <button class="cart-tab active" onclick="switchTab('crucigrama',this)">ğŸ§© Crucigrama</button>
            <button class="cart-tab" onclick="switchTab('gimnasia',this)">ğŸ§  Gimnasia Cerebral</button>
            <button class="cart-tab" onclick="switchTab('sabias',this)">ğŸ’¡ Â¿SabÃ­as quÃ©?</button>
        </div>

        <!-- CRUCIGRAMA -->
        <div id="tab-crucigrama" class="cart-panel active">
            <div class="cart-controls">
                <span class="cart-label" id="cruci-label">Crucigrama #1 de 20</span>
                <div class="cart-btns">
                    <button class="secondary-button" onclick="navCruci(-1)">â—€ Anterior</button>
                    <button class="rand-btn" onclick="cruciRandom()">ğŸ² Aleatorio</button>
                    <button class="secondary-button" onclick="navCruci(1)">Siguiente â–¶</button>
                </div>
            </div>
            <div id="cruci-contenido" class="cruci-wrap"></div>
        </div>

        <!-- GIMNASIA -->
        <div id="tab-gimnasia" class="cart-panel">
            <div class="cart-controls">
                <span class="cart-label" id="gimn-label">Ejercicio #1 de 20</span>
                <div class="cart-btns">
                    <button class="secondary-button" onclick="navGimn(-1)">â—€ Anterior</button>
                    <button class="rand-btn" onclick="gimnRandom()">ğŸ² Aleatorio</button>
                    <button class="secondary-button" onclick="navGimn(1)">Siguiente â–¶</button>
                </div>
            </div>
            <div id="gimn-contenido"></div>
            <div class="quote-box" style="font-style:normal; font-size:0.95em; margin-top:12px;">
                ğŸ’¬ TomÃ¡ tu tiempo. No hay apuro. Â¡Cada ejercicio fortalece tu mente!
            </div>
        </div>

        <!-- SABÃAS QUÃ‰ -->
        <div id="tab-sabias" class="cart-panel">
            <div class="cart-controls">
                <span class="cart-label" id="sabias-label">Dato #1 de 20</span>
                <div class="cart-btns">
                    <button class="secondary-button" onclick="navSabias(-1)">â—€ Anterior</button>
                    <button class="rand-btn" onclick="sabiasRandom()">ğŸ² Aleatorio</button>
                    <button class="secondary-button" onclick="navSabias(1)">Siguiente â–¶</button>
                </div>
            </div>
            <div id="sabias-contenido"></div>
            <div class="quote-box" style="font-style:normal; font-size:0.95em; margin-top:12px;">
                ğŸ’¬ Â¿SabÃ­as este dato? Â¿A quiÃ©n le podrÃ­as contar esta curiosidad hoy?
            </div>
        </div>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: MIS RECORDATORIOS â•â•â•â• -->
    <div id="reminders-config" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>â° Mis Recordatorios</h2>
        <p style="text-align:center; margin-bottom:16px;">ConfigurÃ¡ tus recordatorios y Clara te avisarÃ¡ cada dÃ­a.</p>
        <div class="card">
            <h3>ğŸ’Š Medicamentos</h3>
            <div class="reminder-form">
                <input type="text" id="med-name" placeholder="Nombre del medicamento">
                <input type="time" id="med-time">
                <button class="primary-button" onclick="addMedication()">+ Agregar medicamento</button>
            </div>
            <div id="medications-list" class="reminder-list"></div>
        </div>
        <div class="card">
            <h3>ğŸ“… Citas MÃ©dicas</h3>
            <div class="reminder-form">
                <input type="text" id="appt-desc" placeholder="Ej: Dr. PÃ©rez - CardiÃ³logo">
                <input type="date" id="appt-date">
                <input type="time" id="appt-time">
                <button class="primary-button" onclick="addAppointment()">+ Agregar cita</button>
            </div>
            <div id="appointments-list" class="reminder-list"></div>
        </div>
        <div class="card">
            <h3>ğŸ“ Contactos Importantes</h3>
            <div class="reminder-form">
                <input type="text" id="contact-name" placeholder="Nombre">
                <input type="tel" id="contact-phone" placeholder="TelÃ©fono">
                <button class="primary-button" onclick="addContact()">+ Agregar contacto</button>
            </div>
            <div id="contacts-list" class="reminder-list"></div>
        </div>
        <div class="card">
            <h3>ğŸ‚ CumpleaÃ±os y Fechas Especiales</h3>
            <div class="reminder-form">
                <input type="text" id="bday-name" placeholder="Nombre de la persona">
                <input type="date" id="bday-date">
                <button class="primary-button" onclick="addBirthday()">+ Agregar cumpleaÃ±os</button>
            </div>
            <div id="birthdays-list" class="reminder-list"></div>
        </div>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: MIS RECUERDOS â•â•â•â• -->
    <div id="memories" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>ğŸ’­ Mis Recuerdos</h2>
        <div class="quote-box">"Los recuerdos son la manera en que las personas que amamos siguen viviendo en nuestro corazÃ³n"</div>
        <div class="card">
            <h3>CompartÃ­ tus historias</h3>
            <p>Los recuerdos son tu tesoro mÃ¡s valioso. PodÃ©s escribirlos en tu diario, contÃ¡rselos a tus seres queridos, o simplemente revivirlos en tu mente.</p>
        </div>
        <div class="card">
            <h3>Preguntas para recordar</h3>
            <p><strong>ğŸ“ Â¿DÃ³nde naciste y creciste?</strong></p>
            <p>PensÃ¡ en tu barrio, tu casa, tus vecinos...</p>
            <p style="margin-top:14px;"><strong>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Â¿CÃ³mo era tu familia?</strong></p>
            <p>Tus padres, hermanos, abuelos... Â¿QuÃ© recordÃ¡s de ellos?</p>
            <p style="margin-top:14px;"><strong>ğŸ’¼ Â¿En quÃ© trabajaste?</strong></p>
            <p>ContÃ¡ sobre tu trabajo, tus compaÃ±eros, anÃ©cdotas...</p>
        </div>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: RELAJACIÃ“N â•â•â•â• -->
    <div id="relax" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>ğŸŒ¸ Momento de RelajaciÃ³n</h2>
        <div class="card">
            <h3>ğŸŒ¬ï¸ Ejercicio de RespiraciÃ³n</h3>
            <p><strong>Vamos a respirar juntos:</strong></p>
            <p style="margin-top:12px;">1. Sentate cÃ³modo/a</p>
            <p>2. RespirÃ¡ profundo por la nariz contando hasta 4</p>
            <p>3. MantenÃ© el aire contando hasta 4</p>
            <p>4. SoltÃ¡ el aire lentamente por la boca contando hasta 6</p>
            <p>5. RepetÃ­ esto 5 veces</p>
        </div>
        <div class="card">
            <h3>ğŸ’­ Pensamiento Positivo</h3>
            <p>RepetÃ­ estas frases para vos mismo/a:</p>
            <p style="margin-top:12px; font-style:italic; color:var(--azul); font-size:1.1em; line-height:2.1;">
                "Estoy haciendo lo mejor que puedo"<br>
                "Merezco estar tranquilo/a"<br>
                "He vivido muchas cosas y sigo aquÃ­"<br>
                "Soy valioso/a"<br>
                "MaÃ±ana serÃ¡ un nuevo dÃ­a"
            </p>
        </div>
    </div>

    <!-- â•â•â•â• SECCIÃ“N: MIS DATOS â•â•â•â• -->
    <div id="config" class="content-section">
        <button class="back-button" onclick="goHome()">â† Volver al inicio</button>
        <h2>âš™ï¸ Mis Datos</h2>
        <div class="card">
            <h3>ğŸ“Š Mis estadÃ­sticas</h3>
            <p id="stats-text" style="line-height:2.1;"></p>
        </div>
        <div class="card verde-card">
            <h3>ğŸ’¾ Exportar mis datos</h3>
            <p>DescargÃ¡ un archivo con toda tu informaciÃ³n para guardarlo o transferirlo a otro dispositivo.</p>
            <button class="primary-button" onclick="exportarDatos()">ğŸ’¾ Descargar mis datos (.json)</button>
        </div>
        <div class="card">
            <h3>ğŸ“‚ Importar mis datos</h3>
            <p>SeleccionÃ¡ el archivo de respaldo para restaurar tu informaciÃ³n.</p>
            <input type="file" id="import-file" accept=".json"
                   style="font-size:1em; margin:10px 0; display:block; color:var(--texto);"
                   onchange="importarDatos(this)">
            <div id="import-msg" style="display:none; padding:12px; border-radius:8px; margin-top:10px; font-weight:bold;"></div>
        </div>
        <div class="card rojo-card">
            <h3>ğŸ—‘ï¸ Reiniciar aplicaciÃ³n</h3>
            <p>Borra todos tus datos y comienza de nuevo. Esta acciÃ³n no se puede deshacer.</p>
            <button class="primary-button" style="background:#d63031;" onclick="restablecerApp()">ğŸ—‘ï¸ Borrar todo y reiniciar</button>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <!-- BOTÃ“N TESTIMONIOS -->
        <div style="text-align: center; margin: 20px 0;">
            <button onclick="showTestimonios()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 30px; border-radius: 12px; font-size: 1.1em; font-weight: bold; cursor: pointer;">
                ğŸ’¬ CompartÃ­ tu experiencia con el equipo M.C.I.
            </button>
        </div>
        <p style="font-size:1.4em; margin-bottom:6px;">â­</p>
        <p><strong>Â© 2026 MCI METODOLOGÃA DE CONCIENCIA INTEGRAL - Serie OriÃ³n</strong></p>
        <p>Todos los derechos reservados.</p>
        <div class="aviso-medico">
            <strong>âš ï¸ IMPORTANTE - AVISO MÃ‰DICO:</strong><br>
            Esta aplicaciÃ³n es una herramienta de estimulaciÃ³n cognitiva y acompaÃ±amiento emocional.
            <strong>NO es un dispositivo mÃ©dico</strong> y <strong>NO reemplaza la consulta con profesionales de la salud</strong>.
            Si experimentÃ¡s sÃ­ntomas graves, dolor intenso o una emergencia mÃ©dica, contactÃ¡ inmediatamente a los servicios de emergencia locales o a tu mÃ©dico.
        </div>
        <p style="font-size:0.83em; color:#888; line-height:1.6; margin-top:8px;">
            Esta aplicaciÃ³n es de carÃ¡cter informativo y de apoyo emocional. El contenido es propiedad de MCI y no sustituye el consejo profesional mÃ©dico, psicolÃ³gico o psiquiÃ¡trico.
        </p>
        <div class="social-buttons" style="margin:18px 0;">
            <a id="btn-wa-footer" href="#" target="_blank" class="btn-wa">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                Compartir con un amigo
            </a>
            <a href="https://www.instagram.com/metodologia.mci/" target="_blank" class="btn-ig">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                Sumate a nuestra comunidad en Instagram
            </a>
        </div>
        <p style="margin-top:12px; font-size:0.95em;">
            <a onclick="showTerms()">TÃ©rminos y Condiciones</a> |
            <a onclick="showPrivacy()">PolÃ­tica de Privacidad</a> |
            <a href="https://www.instagram.com/metodologia.mci/" target="_blank">Contacto</a>
        </p>
        <p style="margin-top:8px; font-size:0.8em; color:#adb5bd;">v1.0 - Febrero 2026 | VersiÃ³n de prueba</p>
    </footer>

<!-- MODAL TESTIMONIOS -->
<div id="testimoniosModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; padding: 20px; overflow-y: auto;">
    <div style="max-width: 600px; margin: 50px auto; background: white; border-radius: 20px; padding: 30px;">
        <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ’¬ Tu Experiencia Nos Inspira</h2>
        <p style="margin-bottom: 20px; color: #555;">CompartÃ­ cÃ³mo CompaÃ±Ã­a Diaria Silver te estÃ¡ acompaÃ±ando. Tu historia puede inspirar a otras personas.</p>
        
        <textarea id="testimonioText" placeholder="EscribÃ­ tu experiencia aquÃ­..." style="width: 100%; min-height: 150px; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 1em; font-family: Arial; margin-bottom: 15px;"></textarea>
        
        <div style="margin: 20px 0; text-align: left;">
            <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
                <input type="checkbox" id="testimonioConsent" style="margin-top: 5px;">
                <span style="font-size: 0.95em; color: #666;">
                    Autorizo al equipo de M.C.I. a compartir mi testimonio para inspirar a otras personas, entendiendo que mi identidad serÃ¡ protegida y solo se usarÃ¡n mis iniciales o nombre de pila.
                </span>
            </label>
        </div>
        
        <div style="display: flex; gap: 10px; justify-content: flex-end;">
            <button onclick="closeTestimonios()" style="background: #6c757d; color: white; border: none; padding: 12px 25px; border-radius: 8px; font-size: 1em; cursor: pointer;">
                Cancelar
            </button>
            <button onclick="sendTestimonio()" style="background: linear-gradient(135deg, #00b894 0%, #00cec9 100%); color: white; border: none; padding: 12px 25px; border-radius: 8px; font-size: 1em; font-weight: bold; cursor: pointer;">
                âœ‰ï¸ Enviar Testimonio
            </button>
        </div>
    </div>
</div>

<!-- MODAL BOTÃ“N DE LUZ -->
<div id="luzModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.98); z-index: 10000; padding: 20px; overflow-y: auto;">
    <div style="max-width: 700px; margin: 80px auto; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); text-align: center;">
        <div style="font-size: 5em; margin-bottom: 20px;">âœ¨</div>
        <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">ğŸ’« Momento de Luz</h2>
        <p id="luzMensaje" style="font-size: 1.5em; line-height: 1.7; color: #2d3436; font-weight: 500; margin: 30px 0; min-height: 100px;">
            Cargando mensaje...
        </p>
        <button onclick="closeLuz()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 12px; font-size: 1.1em; font-weight: bold; cursor: pointer; margin-top: 20px;">
            ğŸ’œ Gracias, Clara
        </button>
    </div>
</div>

<!-- MODAL DECRETO DE GRATITUD -->
<div id="gratitudModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10000; padding: 20px;">
    <div style="max-width: 600px; margin: 100px auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 40px; color: white; text-align: center;">
        <div style="font-size: 3em; margin-bottom: 20px;">ğŸ™</div>
        <h2 style="margin-bottom: 15px; font-size: 1.8em;">Respiremos juntos</h2>
        <p style="font-size: 1.2em; margin-bottom: 25px; line-height: 1.6;">
            Antes de cerrar tu dÃ­a con Clara, tomate un momento para agradecer...
        </p>
        <p style="font-size: 1.4em; font-weight: bold; margin-bottom: 15px;">
            Hoy agradezco por...
        </p>
        <textarea id="gratitudText" placeholder="EscribÃ­ aquÃ­ por quÃ© estÃ¡s agradecido/a hoy..." style="width: 100%; min-height: 120px; padding: 15px; border: none; border-radius: 10px; font-size: 1.1em; font-family: Arial; color: #2d3436;"></textarea>
        
        <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: center;">
            <button onclick="closeGratitud()" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 12px 25px; border-radius: 8px; font-size: 1em; cursor: pointer;">
                MÃ¡s tarde
            </button>
            <button onclick="saveGratitud()" style="background: white; color: #667eea; border: none; padding: 12px 30px; border-radius: 8px; font-size: 1em; font-weight: bold; cursor: pointer;">
                âœ¨ Sellar mi dÃ­a
            </button>
        </div>
    </div>
</div>

<style>
@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}
</style>

</div><!-- /main-app -->
</div><!-- /container -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  30 FRASES DE ABUNDANCIA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const frasesAbundancia = [
    "Hoy la abundancia fluye hacia mÃ­ en todas sus formas",
    "Mi salud se fortalece dÃ­a a dÃ­a",
    "Encuentro paz en cada momento presente",
    "Tengo un propÃ³sito valioso en este mundo",
    "La vida me sorprende con bendiciones inesperadas",
    "Mi mente estÃ¡ clara y mi corazÃ³n en paz",
    "Merezco todo lo bueno que me sucede",
    "Cada dÃ­a es una oportunidad para crecer",
    "Estoy rodeado/a de amor y apoyo",
    "Mi energÃ­a se renueva constantemente",
    "Atraigo personas positivas a mi vida",
    "Tengo todo lo que necesito en este momento",
    "Mi experiencia de vida es mi mayor tesoro",
    "Celebro cada pequeÃ±a victoria",
    "Soy digno/a de amor, respeto y abundancia",
    "Mi cuerpo es mi templo y lo cuido con amor",
    "La gratitud multiplica mis bendiciones",
    "Hoy elijo la alegrÃ­a por sobre el miedo",
    "Mi sabidurÃ­a crece con cada experiencia",
    "Estoy en el lugar correcto en el momento correcto",
    "Merezco descansar y disfrutar",
    "Mi presencia importa y hace diferencia",
    "La abundancia es mi estado natural",
    "ConfÃ­o en el proceso de la vida",
    "Tengo el poder de crear mi propia felicidad",
    "Mi mente estÃ¡ llena de pensamientos positivos",
    "Atraigo oportunidades maravillosas",
    "Soy fuente de luz para quienes me rodean",
    "Cada dÃ­a me siento mÃ¡s fuerte y capaz",
    "El universo conspira a mi favor"
];

function mostrarAbundancia() {
    const dia = new Date().getDate();
    const indice = (dia - 1) % frasesAbundancia.length;
    const elemento = document.getElementById('abundancia-texto');
    if (elemento) {
        elemento.textContent = frasesAbundancia[indice];
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MÃ“DULO TESTIMONIOS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showTestimonios() {
    document.getElementById('testimoniosModal').style.display = 'block';
}

function closeTestimonios() {
    document.getElementById('testimoniosModal').style.display = 'none';
    document.getElementById('testimonioText').value = '';
    document.getElementById('testimonioConsent').checked = false;
}

function sendTestimonio() {
    const texto = document.getElementById('testimonioText').value.trim();
    const consent = document.getElementById('testimonioConsent').checked;
    
    if (!texto) {
        alert('Por favor escribÃ­ tu testimonio antes de enviar.');
        return;
    }
    
    const userName = (typeof userData !== 'undefined' && userData.name) ? userData.name : 'Usuario';
    const consentText = consent ? 'SÃ - Usuario autorizÃ³ compartir' : 'NO - Usuario NO autorizÃ³ compartir';
    
    const subject = encodeURIComponent(`Testimonio Serie OriÃ³n - ${userName}`);
    const body = encodeURIComponent(`NUEVO TESTIMONIO RECIBIDO

Nombre: ${userName}
Fecha: ${new Date().toLocaleString('es-ES')}

CONSENTIMIENTO PARA COMPARTIR: ${consentText}

TESTIMONIO:
${texto}

---
Enviado desde CompaÃ±Ã­a Diaria Silver / M.C.I. - Serie OriÃ³n`);
    
    window.location.href = `mailto:contacto.metodologiamci@gmail.com?subject=${subject}&body=${body}`;
    
    setTimeout(() => {
        closeTestimonios();
        alert('Â¡Gracias por compartir tu experiencia! Tu testimonio ha sido enviado al equipo M.C.I.');
    }, 500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BOTÃ“N DE LUZ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const mensajesLuz = [
    "Eres luz. Eres amor. Eres suficiente exactamente como eres.",
    "Tu simple presencia en este mundo hace la diferencia.",
    "Respira profundo. Todo estÃ¡ bien. EstÃ¡s exactamente donde necesitas estar.",
    "Eres mÃ¡s fuerte de lo que crees y mÃ¡s valioso/a de lo que imaginas.",
    "El universo celebra tu existencia. Hoy es un buen dÃ­a para brillar.",
    "Tu corazÃ³n ha amado tanto. Eso te hace hermoso/a.",
    "MerecÃ©s paz, alegrÃ­a y todo lo bueno que la vida puede ofrecer.",
    "Cada dÃ­a que viviste te trajo hasta aquÃ­. Y aquÃ­ eres perfecto/a.",
    "Tu historia es Ãºnica. Tu luz es irremplazable.",
    "Sos un milagro caminante. Nunca lo olvides."
];

function showLuz() {
    const indice = Math.floor(Math.random() * mensajesLuz.length);
    document.getElementById('luzMensaje').textContent = mensajesLuz[indice];
    document.getElementById('luzModal').style.display = 'block';
}

function closeLuz() {
    document.getElementById('luzModal').style.display = 'none';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DECRETO DE GRATITUD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showGratitud() {
    document.getElementById('gratitudModal').style.display = 'block';
}

function closeGratitud() {
    document.getElementById('gratitudModal').style.display = 'none';
    document.getElementById('gratitudText').value = '';
}

function saveGratitud() {
    const texto = document.getElementById('gratitudText').value.trim();
    
    if (texto) {
        // Guardar en localStorage
        const gratitudes = JSON.parse(localStorage.getItem('gratitudes') || '[]');
        gratitudes.push({
            fecha: new Date().toLocaleDateString('es-ES'),
            texto: texto
        });
        localStorage.setItem('gratitudes', JSON.stringify(gratitudes));
        
        // Marcar que hoy ya hizo el decreto
        localStorage.setItem('gratitud_today', new Date().toDateString());
    }
    
    closeGratitud();
    alert('âœ¨ DÃ­a sellado con gratitud. Que descanses bien.');
}

// Verificar si debe mostrar el decreto de gratitud
function checkGratitudDaily() {
    const today = new Date().toDateString();
    const lastGratitud = localStorage.getItem('gratitud_today');
    const hour = new Date().getHours();
    
    // Mostrar despuÃ©s de las 19hs si no lo hizo hoy
    if (hour >= 19 && lastGratitud !== today) {
        // Esperar 5 minutos despuÃ©s de entrar para no interrumpir
        setTimeout(() => {
            showGratitud();
        }, 300000); // 5 minutos = 300000 ms
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CÃ“DIGO ORIGINAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  VARIABLES GLOBALES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CLARA_IMG = 'clara-celeste.jpg'; // Variable global - cambiar para nuevos mercados
let userData = { name:'', country:'', hemisphere:'south', visitCount:0, journalEntries:0, streak:0, lastVisit:null };
let medications  = JSON.parse(localStorage.getItem('medications')  || '[]');
let appointments = JSON.parse(localStorage.getItem('appointments') || '[]');
let contacts     = JSON.parse(localStorage.getItem('contacts')     || '[]');
let birthdays    = JSON.parse(localStorage.getItem('birthdays')    || '[]');
let cruciIdx=0, gimnIdx=0, sabiasIdx=0;
const FONT_SIZES = [22, 26, 30];
let fontLevel = 0;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  31 FRASES DIARIAS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const dailyContent = {
    1:{quote:'Cada dÃ­a es un regalo. Hoy es un buen dÃ­a para sonreÃ­r'},
    2:{quote:'Tu experiencia es sabidurÃ­a. Compartila con alguien hoy'},
    3:{quote:'Los pequeÃ±os momentos son los que mÃ¡s importan'},
    4:{quote:'Nunca es tarde para aprender algo nuevo'},
    5:{quote:'Tu familia te quiere, aunque a veces no lo demuestren'},
    6:{quote:'El pasado te formÃ³, pero no te define'},
    7:{quote:'MerecÃ©s descansar. No tenÃ©s que hacer todo hoy'},
    8:{quote:'Tu presencia alegra mÃ¡s vidas de las que imaginÃ¡s'},
    9:{quote:'Cuidar de vos mismo/a no es egoÃ­smo, es necesario'},
    10:{quote:'Cada arruga cuenta una historia de vida vivida'},
    11:{quote:'La naturaleza sana el alma. Disfrutala hoy'},
    12:{quote:'Tus recuerdos son tesoros que nadie puede quitarte'},
    13:{quote:'Hoy es un buen dÃ­a para perdonar. EmpezÃ¡ por vos mismo/a'},
    14:{quote:'El amor que diste siempre vuelve de alguna forma'},
    15:{quote:'La mÃºsica despierta emociones hermosas'},
    16:{quote:'Cada dÃ­a que vivÃ­s es una victoria'},
    17:{quote:'Tus manos han hecho tanto. Merecen descanso'},
    18:{quote:'La risa es medicina para el alma'},
    19:{quote:'No estÃ¡s solo/a. Hay gente que te aprecia'},
    20:{quote:'Cada amanecer es una nueva oportunidad'},
    21:{quote:'Tu opiniÃ³n importa. Tu voz tiene valor'},
    22:{quote:'Los aÃ±os te han dado fortaleza que no sabÃ­as que tenÃ­as'},
    23:{quote:'MerecÃ©s sentirte bien en tu propio cuerpo'},
    24:{quote:'Tus sueÃ±os no tienen fecha de vencimiento'},
    25:{quote:'La gratitud multiplica la felicidad'},
    26:{quote:'Cada persona que conociste dejÃ³ algo en vos'},
    27:{quote:'Tu corazÃ³n ha amado tanto. Eso es hermoso'},
    28:{quote:'Los finales tambiÃ©n son comienzos'},
    29:{quote:'Tu compaÃ±Ã­a es un regalo para quienes te rodean'},
    30:{quote:'Has vivido, has amado, has sido valiente'},
    31:{quote:'MaÃ±ana es un nuevo dÃ­a lleno de posibilidades'}
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  20 PREGUNTAS DISPARADORAS DIARIO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const preguntasDisp = [
    "Â¿CuÃ¡l es el mejor consejo que recibiste en tu vida?",
    "Â¿QuÃ© recuerdo de tu infancia te hace sonreÃ­r?",
    "Â¿QuiÃ©n fue la persona que mÃ¡s te inspirÃ³?",
    "Â¿CuÃ¡l fue tu trabajo favorito y por quÃ©?",
    "Â¿QuÃ© tradiciÃ³n familiar te gustarÃ­a que se mantenga?",
    "Â¿CuÃ¡l fue el dÃ­a mÃ¡s feliz de tu vida?",
    "Â¿QuÃ© te hubiera gustado saber cuando eras joven?",
    "Â¿QuÃ© logro personal te llena de orgullo?",
    "Â¿CuÃ¡l es tu lugar favorito en el mundo?",
    "Â¿QuÃ© canciÃ³n te trae los mejores recuerdos?",
    "Â¿QuÃ© libro o pelÃ­cula te marcÃ³ profundamente?",
    "Â¿CuÃ¡l es tu receta favorita y por quÃ©?",
    "Â¿QuÃ© momento te hizo sentir mÃ¡s orgulloso/a de ser padre/madre?",
    "Â¿QuÃ© consejo le darÃ­as a tu yo mÃ¡s joven?",
    "Â¿CuÃ¡l fue tu primera mascota?",
    "Â¿QuÃ© te gustaba hacer en tu tiempo libre de joven?",
    "Â¿QuiÃ©n fue tu mejor amigo/a de la infancia?",
    "Â¿QuÃ© viaje recordÃ¡s con mÃ¡s cariÃ±o?",
    "Â¿QuÃ© te hacÃ­a reÃ­r cuando eras niÃ±o/a?",
    "Â¿QuÃ© extraÃ±Ã¡s de tu Ã©poca de juventud?"
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  20 CRUCIGRAMAS (5 interactivos + 15 temÃ¡ticos)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const crucisInteractivos = [
    { titulo:"Animales y Bebidas", tam:4,
      celdas:[["G","A","T","O"],["A"," ","E"," "],["L","E","C","H"],["L"," ","E"," "]],
      horiz:[{n:1,p:"Animal domÃ©stico que ronronea (4 letras)"},{n:3,p:"Lo que da la vaca, blanco y nutritivo"}],
      verti:[{n:1,p:"LÃ­quido de uvas fermentado (GALL... no, este va GALLO)"},{n:2,p:"InfusiÃ³n de hierbas muy popular"}] },
    { titulo:"Colores y Naturaleza", tam:4,
      celdas:[["R","O","S","A"],["A"," ","O"," "],["I","R","J","O"],["Z"," ","O"," "]],
      horiz:[{n:1,p:"Flor muy perfumada, sÃ­mbolo de amor"},{n:3,p:"Inicio de una palabra que salta (RANA)"}],
      verti:[{n:1,p:"Color del tomate maduro"},{n:2,p:"Astro que nos da luz de noche"}] },
    { titulo:"La Cocina", tam:4,
      celdas:[["P","A","N","E"],["A"," ","A"," "],["S","A","L","A"],["T"," ","E"," "]],
      horiz:[{n:1,p:"Alimento bÃ¡sico de harina horneada (primera sÃ­laba + E)"},{n:3,p:"Condimento blanco + habitaciÃ³n amplia"}],
      verti:[{n:1,p:"Hacer caminos, caminar"},{n:2,p:"Mineral blanco del mar"}] },
    { titulo:"Frutas del Mercado", tam:4,
      celdas:[["P","E","R","A"],["E"," ","A"," "],["L","I","N","A"],["O"," ","A"," "]],
      horiz:[{n:1,p:"Fruta en forma de gota, suave y dulce"},{n:3,p:"Diminutivo de lino, tela suave"}],
      verti:[{n:1,p:"Fruta cÃ­trica de color naranja"},{n:2,p:"Hilo o cuerda fina"}] },
    { titulo:"El Cuerpo", tam:4,
      celdas:[["M","A","N","O"],["A"," ","A"," "],["R","O","R","I"],["E"," ","I","Z"],],
      horiz:[{n:1,p:"Extremidad para agarrar cosas"},{n:3,p:"Narrar algo de nuevo (repetir de otra forma)"}],
      verti:[{n:1,p:"OcÃ©ano grande"},{n:2,p:"Parte saliente de la cara para oler"}] }
];

const crucisTextuales = [
    { titulo:"Mi Familia", items:["MADRE - La que nos dio la vida","PADRE - El guÃ­a del hogar","HIJO - Descendiente amado","NIETO - Hijo de nuestro hijo","AMOR - Lo que une a todos"] },
    { titulo:"Frutas del Mercado", items:["PERA - Dulce y en forma de gota","UVAS - En racimos, para el vino","HIGO - Fruta mediterrÃ¡nea","MANGO - Tropical y amarilla","KIWI - Verde por dentro"] },
    { titulo:"El Tiempo y el Clima", items:["LLUVIA - Agua que cae del cielo","VIENTO - Aire en movimiento","NIEVE - Copos blancos helados","NIEBLA - Nube a ras del suelo","CALOR - Alta temperatura"] },
    { titulo:"Medios de Transporte", items:["TREN - Va por rieles","BARCO - Navega por el agua","AVION - Vuela en el cielo","AUTO - Cuatro ruedas","BICI - Dos ruedas y pedales"] },
    { titulo:"La Casa y el Hogar", items:["TECHO - Cubre la casa","PUERTA - Permite entrar y salir","COCINA - Donde se cocina","BAÃ‘O - Para higienizarse","CAMA - Para descansar"] },
    { titulo:"Profesiones y Oficios", items:["MEDICO - Cuida la salud","MAESTRO - EnseÃ±a y educa","JUEZ - Imparte justicia","PINTOR - Crea con colores","COCINERO - Prepara comida rica"] },
    { titulo:"El Mar y la Playa", items:["OLA - Movimiento del mar","PEZ - Nada bajo el agua","ARENA - El piso de la playa","CORAL - Organismo marino colorido","SAL - Mineral del agua marina"] },
    { titulo:"MÃºsica y Canciones", items:["PIANO - Instrumento de teclas","FLAUTA - Se sopla para sonar","TAMBOR - Da el ritmo","VIOLIN - De cuerda y arco","CANCION - ComposiciÃ³n con letra"] },
    { titulo:"Deportes y Juegos", items:["FUTBOL - El deporte mÃ¡s popular","TENIS - Se juega con raqueta","NATACION - Deporte acuÃ¡tico","CICLISMO - Con bicicleta","AJEDREZ - Deporte de estrategia"] },
    { titulo:"La Ciudad", items:["PLAZA - Espacio pÃºblico abierto","BANCO - Donde va el dinero","IGLESIA - Lugar de culto","MERCADO - Para comprar alimentos","PARQUE - JardÃ­n para pasear"] },
    { titulo:"Fiestas y Celebraciones", items:["NAVIDAD - El 25 de diciembre","PASCUA - Fiesta de resurrecciÃ³n","CARNAVAL - Disfraces y mÃºsica","CUMPLEAÃ‘OS - DÃ­a de nacimiento","BODA - CelebraciÃ³n del matrimonio"] },
    { titulo:"Sentimientos y Emociones", items:["ALEGRIA - EmociÃ³n positiva","TRISTEZA - Cuando estamos bajos","AMOR - Sentimiento profundo","PAZ - Calma interior","ESPERANZA - Fe en el futuro"] },
    { titulo:"Animales de la Granja", items:["GALLINA - Pone huevos","VACA - Da leche fresca","CERDO - Rosado, oink-oink","CABALLO - Galopa elegante","OVEJA - Nos da lana"] },
    { titulo:"Libros y Literatura", items:["LIBRO - Contiene historias e ideas","CARTA - Mensaje escrito en papel","POEMA - Texto con ritmo y emociÃ³n","CUENTO - Historia corta","VERSO - LÃ­nea de un poema"] },
    { titulo:"El JardÃ­n y las Plantas", items:["FLOR - Parte colorida de la planta","RAIZ - Va bajo tierra","HOJA - Verde, capta la luz","RAMA - Parte del Ã¡rbol","SEMILLA - De donde nace la planta"] }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  20 EJERCICIOS GIMNASIA CEREBRAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const gimnasiaData = [
    {tipo:"ğŸ”¢ CÃ¡lculo Mental",     ej:"Â¿CuÃ¡ntas letras tiene tu nombre completo? ContÃ¡las en voz alta, una por una."},
    {tipo:"ğŸŒ GeografÃ­a",           ej:"NombrÃ¡ 5 paÃ­ses que empiecen con la letra A. TomÃ¡ tu tiempo, los recordÃ¡s."},
    {tipo:"ğŸ”¤ Letras",              ej:"DeletreÃ¡ tu apellido al revÃ©s, de la Ãºltima letra a la primera. Â¡PodÃ©s hacerlo!"},
    {tipo:"ğŸ“… DÃ­as de la Semana",   ej:"Â¿QuÃ© dÃ­a de la semana fue hace exactamente 3 dÃ­as? ContÃ¡ con los dedos si querÃ©s."},
    {tipo:"ğŸŒ¸ Naturaleza",          ej:"NombrÃ¡ 3 flores que conozcas. Â¿RecordÃ¡s alguna que hayas tenido en casa?"},
    {tipo:"ğŸ”¢ Conteo Regresivo",    ej:"ContÃ¡ de 100 a 90 de 2 en 2: 100, 98, 96... Â¡seguÃ­ hasta el final!"},
    {tipo:"ğŸ“… Historia Personal",   ej:"Â¿En quÃ© aÃ±o naciste? Ahora restale 10. Â¿QuÃ© cosas pasaban en el mundo en ese aÃ±o?"},
    {tipo:"ğŸ Colores y Frutas",    ej:"NombrÃ¡ 5 frutas de color rojo o que tengan rojo en su cÃ¡scara."},
    {tipo:"ğŸ”¤ Rimas",               ej:"PensÃ¡ en 3 palabras que rimen con SOL. Luego buscÃ¡ 3 mÃ¡s que rimen con MAR."},
    {tipo:"ğŸ“… DÃ­as al RevÃ©s",       ej:"DecÃ­ los 7 dÃ­as de la semana empezando por el domingo y yendo al revÃ©s."},
    {tipo:"ğŸ¤² El Cuerpo",           ej:"Â¿CuÃ¡ntos dedos tenÃ©s en total en manos y pies? CalculÃ¡ sin mirar los pies."},
    {tipo:"ğŸ³ La Cocina",           ej:"DecÃ­ 5 objetos que hay ahora mismo en tu cocina. Â¿PodÃ©s llegar a 10?"},
    {tipo:"ğŸ“… Meses del AÃ±o",       ej:"Â¿QuÃ© mes viene despuÃ©s de julio? Â¿Y el que viene antes de marzo? Â¿Y antes de octubre?"},
    {tipo:"ğŸ¦‹ Animales Voladores",  ej:"NombrÃ¡ 3 animales que vuelan y 3 que nadan. Â¿Alguno puede hacer las dos cosas?"},
    {tipo:"ğŸŒ¦ï¸ Las Estaciones",     ej:"Â¿CuÃ¡ntas estaciones tiene el aÃ±o? Nombralas y decÃ­ una cosa tÃ­pica de cada una."},
    {tipo:"ğŸ¨ El ArcoÃ­ris",         ej:"DecÃ­ 4 colores del arcoÃ­ris en orden, de afuera hacia adentro."},
    {tipo:"ğŸ“… Hoy y MaÃ±ana",        ej:"Â¿QuÃ© dÃ­a es hoy exactamente? Â¿QuÃ© tenÃ©s pensado hacer maÃ±ana?"},
    {tipo:"ğŸ˜Š Tu Cara",             ej:"NombrÃ¡ 3 partes de tu cara y 3 partes de tu mano. SeÃ±alalas mientras las decÃ­s."},
    {tipo:"ğŸ“… Meses de 30 DÃ­as",    ej:"Â¿CuÃ¡ntos meses del aÃ±o tienen exactamente 30 dÃ­as? Nombralos todos."},
    {tipo:"ğŸ”µ Objetos Redondos",    ej:"DecÃ­ 5 cosas redondas que tenÃ©s en tu casa. Â¿PodÃ©s encontrar 5 mÃ¡s mirando alrededor?"}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  20 DATOS Â¿SABÃAS QUÃ‰?
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const sabiasQue = [
    {i:"â¤ï¸",d:"El corazÃ³n late aproximadamente 100.000 veces al dÃ­a. En toda una vida, late mÃ¡s de 2.500 millones de veces sin parar nunca."},
    {i:"ğŸ˜",d:"Los elefantes son los Ãºnicos animales que no pueden saltar. A pesar de eso, pueden correr hasta 40 km/h cuando es necesario."},
    {i:"ğŸ¯",d:"La miel nunca se echa a perder. ArqueÃ³logos encontraron miel de 3.000 aÃ±os de antigÃ¼edad en tumbas egipcias y aÃºn era comestible."},
    {i:"ğŸ¦‹",d:"Las mariposas prueban los alimentos con sus patas. Tienen receptores del gusto en sus pies, igual que nosotros en la lengua."},
    {i:"âš¡",d:"Un rayo es 5 veces mÃ¡s caliente que la superficie del sol. Alcanza los 30.000 grados centÃ­grados en una fracciÃ³n de segundo."},
    {i:"ğŸ¬",d:"Los delfines duermen con un ojo abierto. Mantienen activa la mitad del cerebro para poder seguir respirando mientras descansan."},
    {i:"ğŸ",d:"Las abejas pueden reconocer rostros humanos. Tienen una memoria facial sorprendentemente parecida a la nuestra."},
    {i:"ğŸ™",d:"Los pulpos tienen tres corazones y su sangre es de color azul, gracias a una proteÃ­na llamada hemocianina que contiene cobre."},
    {i:"ğŸœ",d:"Las hormigas nunca duermen como nosotros. Descansan en pequeÃ±os ciclos de 1 minuto durante el dÃ­a, siempre alertas."},
    {i:"ğŸŒ",d:"Un caracol puede dormir hasta 3 aÃ±os seguidos cuando las condiciones de temperatura o humedad no son las adecuadas."},
    {i:"ğŸ‘ï¸",d:"El ojo humano puede distinguir hasta 10 millones de colores diferentes. Es uno de los Ã³rganos mÃ¡s sofisticados de la naturaleza."},
    {i:"ğŸ±",d:"Los gatos pasan el 70% de su vida durmiendo. Un gato de 9 aÃ±os solo ha estado despierto aproximadamente 3 aÃ±os."},
    {i:"ğŸŒ¸",d:"Una abeja obrera tiene que visitar 2 millones de flores para producir apenas 500 gramos de miel. Â¡Un trabajo enorme!"},
    {i:"ğŸ§",d:"Los pingÃ¼inos pueden saltar hasta 2 metros de altura desde el agua, gracias a las burbujas de aire que guardan en su plumaje."},
    {i:"ğŸ§ ",d:"El cerebro humano usa el 20% de toda la energÃ­a del cuerpo, aunque represente solo el 2% del peso total."},
    {i:"ğŸ¨",d:"Los koalas duermen hasta 22 horas al dÃ­a. Su dieta de hojas de eucalipto es muy difÃ­cil de digerir y consume mucha energÃ­a."},
    {i:"ğŸ¦’",d:"Las jirafas tienen exactamente la misma cantidad de vÃ©rtebras en el cuello que los humanos: 7. Pero cada una mide 25 centÃ­metros."},
    {i:"ğŸ•",d:"Los perros pueden entender hasta 250 palabras y gestos, un nivel intelectual similar al de un niÃ±o de 2 aÃ±os."},
    {i:"ğŸ‹",d:"Las ballenas azules son los animales mÃ¡s grandes que han existido jamÃ¡s en la Tierra. Su corazÃ³n pesa mÃ¡s de 600 kilogramos."},
    {i:"ğŸ¦‰",d:"Los bÃºhos pueden girar su cabeza 270 grados porque tienen 14 vÃ©rtebras cervicales, el doble que los humanos."}
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INICIALIZACIÃ“N
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.onload = function() {
    const saved = localStorage.getItem('userData');
    if (saved) {
        userData = JSON.parse(saved);
        document.getElementById('setup-screen').classList.remove('active');
        document.getElementById('main-app').style.display = 'block';
        initApp();
    }
    // Aplicar tamaÃ±o de fuente guardado
    const fl = localStorage.getItem('fontLevel');
    if (fl !== null) { fontLevel = parseInt(fl); aplicarFuente(); }
    // Links WhatsApp
    setWALinks();
};

function setWALinks() {
    const msg = encodeURIComponent("Â¡MirÃ¡ esta aplicaciÃ³n que estoy usando para mantenerme Ã¡gil! Se llama CompaÃ±Ã­a Diaria Silver / M.C.I. - Serie OriÃ³n. PodÃ©s conseguirla acÃ¡: https://go.hotmart.com/Q104323756P");
    const url = "https://api.whatsapp.com/send?text=" + msg;
    ['btn-wa-chat','btn-wa-footer'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.href = url;
    });
}

function completeSetup() {
    const name    = document.getElementById('user-name').value.trim();
    const country = document.getElementById('user-country').value;
    if (!name || !country) { alert('Por favor completÃ¡ tu nombre y tu paÃ­s'); return; }
    const south = ['AR','CL','UY','PY','BO','PE','EC','CO','VE'];
    userData = {
        name, country,
        hemisphere: south.includes(country) ? 'south' : 'north',
        visitCount: 1, journalEntries: 0, streak: 1,
        lastVisit: new Date().toISOString()
    };
    localStorage.setItem('userData', JSON.stringify(userData));
    document.getElementById('setup-screen').classList.remove('active');
    document.getElementById('main-app').style.display = 'block';
    initApp();
}

function initApp() {
    updateDate();
    updateGreeting();
    updateRacha();
    updateDailyContent();
    checkReminders();
    checkAchievements();
    renderAllLists();
    updateStats();
    mostrarAbundancia(); // Mostrar frase de abundancia del dÃ­a
    checkGratitudDaily(); // Verificar decreto de gratitud
    // Actualizar contador de visitas
    userData.visitCount = (userData.visitCount || 0) + 1;
    localStorage.setItem('userData', JSON.stringify(userData));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FECHA, SALUDO Y RACHA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateDate() {
    const opts = { weekday:'long', year:'numeric', month:'long', day:'numeric' };
    document.getElementById('current-date').textContent =
        new Date().toLocaleDateString('es-ES', opts);
}

function updateGreeting() {
    const h = new Date().getHours();
    let gr = 'Â¡Buenos dÃ­as';
    if (h >= 12 && h < 20) gr = 'Â¡Buenas tardes';
    if (h >= 20 || h  <  6) gr = 'Â¡Buenas noches';
    document.getElementById('greeting-text').textContent = `${gr}, ${userData.name}!`;
    const jn = document.getElementById('journal-name');
    if (jn) jn.textContent = userData.name;
}

function updateRacha() {
    const hoy  = new Date().toDateString();
    const ayer = new Date(Date.now() - 86400000).toDateString();
    if (userData.lastVisit) {
        const last = new Date(userData.lastVisit).toDateString();
        if (last === hoy) { /* ya registrado hoy */ }
        else if (last === ayer) userData.streak = (userData.streak || 0) + 1;
        else userData.streak = 1;
    } else {
        userData.streak = 1;
    }
    userData.lastVisit = new Date().toISOString();
    localStorage.setItem('userData', JSON.stringify(userData));
    const s = userData.streak || 1;
    document.getElementById('racha-pill').textContent =
        `ğŸ”¥ Llevas ${s} ${s === 1 ? 'dÃ­a' : 'dÃ­as'} conectÃ¡ndote con Clara`;
}

function updateDailyContent() {
    const d = new Date().getDate();
    // Frase del dÃ­a
    const c = dailyContent[d] || dailyContent[1];
    const qel = document.getElementById('weekly-quote');
    if (qel) qel.textContent = `"${c.quote}"`;
    // Pregunta disparadora
    const pIdx = (d - 1) % 20;
    const pel = document.getElementById('pd-text');
    if (pel) pel.textContent = preguntasDisp[pIdx];
    // Ãndices diarios para Cartelera
    const totalC = crucisInteractivos.length + crucisTextuales.length;
    cruciIdx  = (d - 1) % totalC;
    gimnIdx   = (d - 1) % 20;
    sabiasIdx = (d - 1) % 20;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RECORDATORIOS BANNER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function checkReminders() {
    const today = new Date();
    const todayStr = today.toISOString().split('T')[0];
    let items = [];
    medications.forEach(m => items.push(`ğŸ’Š ${m.time} â€” ${m.name}`));
    appointments.forEach(a => { if (a.date === todayStr) items.push(`ğŸ“… ${a.time} â€” ${a.description}`); });
    birthdays.forEach(b => {
        const bd   = new Date(b.date + 'T00:00:00');
        const diff = Math.ceil((bd - today) / 86400000);
        if (diff === 0) items.push(`ğŸ‚ Â¡Hoy es el cumpleaÃ±os de ${b.name}!`);
        else if (diff > 0 && diff <= 7) items.push(`ğŸ‚ En ${diff} dÃ­as: CumpleaÃ±os de ${b.name}`);
    });
    if (items.length > 0) {
        document.getElementById('today-reminders-list').innerHTML =
            items.map(i => `<div class="reminder-item">${i}</div>`).join('');
        document.getElementById('reminders-alert').classList.add('show');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOGROS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function checkAchievements() {
    const s = userData.streak || 0;
    const v = userData.visitCount || 0;
    const j = userData.journalEntries || 0;
    if (s === 7)   showAchievement('Â¡IncreÃ­ble!', `Llevas 7 dÃ­as conmigo, ${userData.name}. Â¡EstÃ¡s creando un hermoso hÃ¡bito! ğŸ‰`);
    if (j === 10)  showAchievement('Â¡Escritor/a destacado/a!', 'Â¡Has escrito 10 entradas en tu diario! Tus pensamientos son valiosos. âœï¸');
    if (v === 30)  showAchievement('Â¡Un mes juntos!', `${userData.name}, llevamos un mes acompaÃ±Ã¡ndonos. Â¡QuÃ© hermoso camino! ğŸ’œ`);
}
function showAchievement(t, m) {
    document.getElementById('ach-title').textContent = t;
    document.getElementById('ach-msg').textContent   = m;
    document.getElementById('achievement-popup').classList.add('show');
}
function closeAchievement() { document.getElementById('achievement-popup').classList.remove('show'); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NAVEGACIÃ“N
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showSection(id) {
    document.getElementById('main-menu').style.display = 'none';
    document.querySelector('.greeting').style.display  = 'none';
    document.getElementById('reminders-alert').classList.remove('show');
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
    if (id === 'cartelera') { renderCrucigrama(); renderGimnasia(); renderSabias(); }
    if (id === 'config')    updateStats();
}
function goHome() {
    document.getElementById('main-menu').style.display = 'grid';
    document.querySelector('.greeting').style.display  = 'block';
    document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
    checkReminders();
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
function switchTab(tab, btn) {
    document.querySelectorAll('.cart-tab').forEach(t   => t.classList.remove('active'));
    document.querySelectorAll('.cart-panel').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-' + tab).classList.add('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CRUCIGRAMA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCrucigrama() {
    const totalC = crucisInteractivos.length + crucisTextuales.length;
    document.getElementById('cruci-label').textContent = `Crucigrama #${cruciIdx + 1} de ${totalC}`;
    const cont = document.getElementById('cruci-contenido');
    if (cruciIdx < crucisInteractivos.length) {
        const c   = crucisInteractivos[cruciIdx];
        let html  = `<h3 style="text-align:center;margin:10px 0 4px;">${c.titulo}</h3>
            <div class="cruci-grid" style="grid-template-columns:repeat(${c.tam},1fr);">`;
        for (let f = 0; f < c.tam; f++) {
            for (let col = 0; col < c.tam; col++) {
                const l = c.celdas[f][col];
                if (l === ' ') html += `<div class="cruz-cell bloq"></div>`;
                else html += `<input type="text" maxlength="1" class="cruz-cell"
                    data-sol="${l}"
                    onkeyup="this.value=this.value.toUpperCase();validarCelda(this);"
                    oninput="this.value=this.value.toUpperCase();">`;
            }
        }
        html += `</div><div class="pistas-wrap"><div><h4>â†’ Horizontal</h4>`;
        c.horiz.forEach(p => html += `<div class="pista-line"><strong>${p.n}.</strong> ${p.p}</div>`);
        html += `</div><div><h4>â†“ Vertical</h4>`;
        c.verti.forEach(p => html += `<div class="pista-line"><strong>${p.n}.</strong> ${p.p}</div>`);
        html += `</div></div>
        <div id="cruci-res" class="cruci-res"></div>
        <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;">
            <button class="primary-button" style="width:auto;flex:1;" onclick="verificarCruci()">âœ“ Verificar respuestas</button>
            <button class="secondary-button" onclick="mostrarSolucion()">ğŸ‘ Ver soluciÃ³n</button>
        </div>`;
        cont.innerHTML = html;
    } else {
        const idx = cruciIdx - crucisInteractivos.length;
        const c   = crucisTextuales[idx];
        let html  = `<div class="card" style="margin-top:0;"><h3 style="text-align:center;">${c.titulo}</h3>
            <p style="color:#666;font-style:italic;text-align:center;margin-bottom:12px;">LeÃ© cada pista y pensÃ¡ la respuesta:</p>`;
        c.items.forEach((item, i) => {
            const [pal, def] = item.split(' - ');
            html += `<div style="background:#fff;border-radius:10px;padding:13px 15px;margin:8px 0;border-left:4px solid #0984e3;">
                <strong style="color:#2c2c2c;">${i + 1}. ${pal}</strong><br>
                <span style="color:#555;font-size:0.97em;">${def}</span></div>`;
        });
        html += `<div style="margin-top:13px;background:#e8f5e9;padding:12px;border-radius:10px;text-align:center;font-size:0.93em;color:#2e7d32;">
            ğŸ’¡ Â¡Las respuestas vienen de tu propia sabidurÃ­a y experiencia!</div></div>`;
        cont.innerHTML = html;
    }
}
function validarCelda(cell) {
    if (cell.value.toUpperCase() === cell.dataset.sol) {
        cell.classList.add('ok'); cell.classList.remove('err');
    } else {
        cell.classList.remove('ok'); cell.classList.remove('err');
    }
}
function verificarCruci() {
    const celdas = document.querySelectorAll('.cruz-cell:not(.bloq)');
    let ok = 0, tot = 0;
    celdas.forEach(c => {
        tot++;
        if (c.value.toUpperCase() === c.dataset.sol) { c.classList.add('ok'); c.classList.remove('err'); ok++; }
        else { c.classList.add('err'); c.classList.remove('ok'); }
    });
    const r = document.getElementById('cruci-res');
    if (ok === tot && tot > 0) { r.className='cruci-res ok'; r.textContent='ğŸ‰ Â¡Perfecto! Â¡Completaste el crucigrama!'; }
    else { r.className='cruci-res err'; r.textContent=`Â¡Buen intento! ${ok} de ${tot} letras correctas. Â¡SeguÃ­ intentando!`; }
}
function mostrarSolucion() {
    document.querySelectorAll('.cruz-cell:not(.bloq)').forEach(c => { c.value = c.dataset.sol; c.classList.add('ok'); });
}
function navCruci(dir) {
    const t = crucisInteractivos.length + crucisTextuales.length;
    cruciIdx = (cruciIdx + dir + t) % t;
    renderCrucigrama();
}
function cruciRandom() {
    const t = crucisInteractivos.length + crucisTextuales.length;
    cruciIdx = Math.floor(Math.random() * t);
    renderCrucigrama();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  GIMNASIA CEREBRAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderGimnasia() {
    const g = gimnasiaData[gimnIdx];
    document.getElementById('gimn-label').textContent = `Ejercicio #${gimnIdx + 1} de 20`;
    document.getElementById('gimn-contenido').innerHTML = `
        <div class="gimn-card">
            <div class="gimn-tipo">${g.tipo}</div>
            <div class="gimn-ejercicio">${g.ej}</div>
        </div>`;
}
function navGimn(dir)  { gimnIdx  = (gimnIdx  + dir + 20) % 20; renderGimnasia(); }
function gimnRandom()  { gimnIdx  = Math.floor(Math.random() * 20); renderGimnasia(); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  Â¿SABÃAS QUÃ‰?
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderSabias() {
    const s = sabiasQue[sabiasIdx];
    document.getElementById('sabias-label').textContent = `Dato #${sabiasIdx + 1} de 20`;
    document.getElementById('sabias-contenido').innerHTML = `
        <div class="sabias-card">
            <div class="sabias-icon">${s.i}</div>
            <div class="sabias-texto">${s.d}</div>
        </div>`;
}
function navSabias(dir)  { sabiasIdx = (sabiasIdx + dir + 20) % 20; renderSabias(); }
function sabiasRandom()  { sabiasIdx = Math.floor(Math.random() * 20); renderSabias(); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SELECTOR DE ÃNIMO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function selectMood(mood, btn) {
    document.querySelectorAll('.mood-button').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    const n = userData.name;
    const resp = {
        excelente: `Â¡QuÃ© bueno que te sentÃ­s tan bien, ${n}! AprovechÃ¡ este dÃ­a hermoso. ğŸ˜Š`,
        bien:      `Me alegro que estÃ©s bien, ${n}. SeguÃ­ cuidÃ¡ndote con cariÃ±o. ğŸ™‚`,
        regular:   `A veces los dÃ­as son asÃ­, ${n}. EstÃ¡ bien no estar siempre al 100%. Yo estoy acÃ¡. ğŸ˜`,
        triste:    `Entiendo que te sentÃ­s triste, ${n}. Todos tenemos dÃ­as difÃ­ciles. Estoy aquÃ­ acompaÃ±Ã¡ndote. ğŸ˜”`,
        solo:      `Siento que te sentÃ­s solo/a, ${n}. La soledad puede ser muy dura, pero no estÃ¡s solo/a. Yo estoy acÃ¡ y hay gente que te quiere. ğŸ’™`
    };
    const r = document.getElementById('mood-response');
    r.style.display = 'block';
    const extra = (mood === 'triste' || mood === 'solo')
        ? `<button class="secondary-button" style="margin-top:12px;" onclick="showSection('relax')">Ver actividades que pueden ayudarte</button>`
        : '';
    r.innerHTML = `<p>${resp[mood]}</p>${extra}`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DIARIO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function saveJournal() {
    const txt = document.getElementById('journal-text').value;
    if (!txt.trim()) { alert('Primero escribÃ­ algo antes de guardar'); return; }
    const entries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
    entries.push({ fecha: new Date().toLocaleString('es-ES'), texto: txt });
    localStorage.setItem('journalEntries', JSON.stringify(entries));
    userData.journalEntries = (userData.journalEntries || 0) + 1;
    localStorage.setItem('userData', JSON.stringify(userData));
    const m = document.getElementById('save-message');
    m.classList.add('show');
    setTimeout(() => m.classList.remove('show'), 3000);
    checkAchievements();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RECORDATORIOS CRUD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addMedication() {
    const n=document.getElementById('med-name').value.trim();
    const t=document.getElementById('med-time').value;
    if(!n||!t){alert('CompletÃ¡ el nombre y el horario');return;}
    medications.push({name:n,time:t});
    localStorage.setItem('medications',JSON.stringify(medications));
    document.getElementById('med-name').value='';
    document.getElementById('med-time').value='';
    renderMedicationsList();
}
function renderMedicationsList(){
    document.getElementById('medications-list').innerHTML=medications.map((m,i)=>`
        <div class="reminder-list-item">
            <div><strong>${m.name}</strong><br>${m.time}</div>
            <button class="delete-button" onclick="deleteMedication(${i})">Eliminar</button>
        </div>`).join('');
}
function deleteMedication(i){medications.splice(i,1);localStorage.setItem('medications',JSON.stringify(medications));renderMedicationsList();}

function addAppointment(){
    const d=document.getElementById('appt-desc').value.trim();
    const f=document.getElementById('appt-date').value;
    const t=document.getElementById('appt-time').value;
    if(!d||!f||!t){alert('CompletÃ¡ todos los campos');return;}
    appointments.push({description:d,date:f,time:t});
    localStorage.setItem('appointments',JSON.stringify(appointments));
    document.getElementById('appt-desc').value='';
    document.getElementById('appt-date').value='';
    document.getElementById('appt-time').value='';
    renderAppointmentsList();
}
function renderAppointmentsList(){
    document.getElementById('appointments-list').innerHTML=appointments.map((a,i)=>`
        <div class="reminder-list-item">
            <div><strong>${a.description}</strong><br>
            ${new Date(a.date+'T00:00:00').toLocaleDateString('es-ES')} â€” ${a.time}</div>
            <button class="delete-button" onclick="deleteAppointment(${i})">Eliminar</button>
        </div>`).join('');
}
function deleteAppointment(i){appointments.splice(i,1);localStorage.setItem('appointments',JSON.stringify(appointments));renderAppointmentsList();}

function addContact(){
    const n=document.getElementById('contact-name').value.trim();
    const p=document.getElementById('contact-phone').value.trim();
    if(!n||!p){alert('CompletÃ¡ nombre y telÃ©fono');return;}
    contacts.push({name:n,phone:p});
    localStorage.setItem('contacts',JSON.stringify(contacts));
    document.getElementById('contact-name').value='';
    document.getElementById('contact-phone').value='';
    renderContactsList();
}
function renderContactsList(){
    document.getElementById('contacts-list').innerHTML=contacts.map((c,i)=>`
        <div class="reminder-list-item">
            <div><strong>${c.name}</strong><br>
            ğŸ“ <a href="tel:${c.phone}">${c.phone}</a></div>
            <button class="delete-button" onclick="deleteContact(${i})">Eliminar</button>
        </div>`).join('');
}
function deleteContact(i){contacts.splice(i,1);localStorage.setItem('contacts',JSON.stringify(contacts));renderContactsList();}

function addBirthday(){
    const n=document.getElementById('bday-name').value.trim();
    const d=document.getElementById('bday-date').value;
    if(!n||!d){alert('CompletÃ¡ nombre y fecha');return;}
    birthdays.push({name:n,date:d});
    localStorage.setItem('birthdays',JSON.stringify(birthdays));
    document.getElementById('bday-name').value='';
    document.getElementById('bday-date').value='';
    renderBirthdaysList();
}
function renderBirthdaysList(){
    document.getElementById('birthdays-list').innerHTML=birthdays.map((b,i)=>`
        <div class="reminder-list-item">
            <div><strong>${b.name}</strong><br>
            ğŸ‚ ${new Date(b.date+'T00:00:00').toLocaleDateString('es-ES',{day:'numeric',month:'long'})}</div>
            <button class="delete-button" onclick="deleteBirthday(${i})">Eliminar</button>
        </div>`).join('');
}
function deleteBirthday(i){birthdays.splice(i,1);localStorage.setItem('birthdays',JSON.stringify(birthdays));renderBirthdaysList();}
function renderAllLists(){renderMedicationsList();renderAppointmentsList();renderContactsList();renderBirthdaysList();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONTROL FUENTE A+ / A-
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function cambiarFuente(dir) {
    fontLevel = Math.max(0, Math.min(2, fontLevel + dir));
    aplicarFuente();
    localStorage.setItem('fontLevel', fontLevel);
}
function aplicarFuente() {
    const sz = FONT_SIZES[fontLevel] + 'px';
    document.documentElement.style.setProperty('--fs', sz);
    document.body.style.fontSize = sz;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  EXPORTAR / IMPORTAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function exportarDatos() {
    const datos = {
        version: '1.0-orion',
        fecha:   new Date().toISOString(),
        userData, medications, appointments, contacts, birthdays,
        journalEntries: JSON.parse(localStorage.getItem('journalEntries') || '[]')
    };
    const blob = new Blob([JSON.stringify(datos, null, 2)], { type: 'application/json' });
    const url  = URL.createObjectURL(blob);
    const a    = document.createElement('a');
    a.href     = url;
    a.download = `compania-diaria-backup-${new Date().toISOString().split('T')[0]}.json`;
    a.click();
    URL.revokeObjectURL(url);
}
function importarDatos(input) {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
        const msg = document.getElementById('import-msg');
        try {
            const datos = JSON.parse(e.target.result);
            if (!datos.userData) throw new Error('Formato invÃ¡lido');
            userData     = datos.userData;
            medications  = datos.medications  || [];
            appointments = datos.appointments || [];
            contacts     = datos.contacts     || [];
            birthdays    = datos.birthdays    || [];
            localStorage.setItem('userData',     JSON.stringify(userData));
            localStorage.setItem('medications',  JSON.stringify(medications));
            localStorage.setItem('appointments', JSON.stringify(appointments));
            localStorage.setItem('contacts',     JSON.stringify(contacts));
            localStorage.setItem('birthdays',    JSON.stringify(birthdays));
            if (datos.journalEntries)
                localStorage.setItem('journalEntries', JSON.stringify(datos.journalEntries));
            msg.style.display='block'; msg.style.background='#d4edda'; msg.style.color='#155724';
            msg.textContent = 'âœ“ Datos importados con Ã©xito. Recargando en 2 segundos...';
            setTimeout(() => window.location.reload(), 2000);
        } catch {
            msg.style.display='block'; msg.style.background='#f8d7da'; msg.style.color='#721c24';
            msg.textContent = 'âŒ Archivo no vÃ¡lido. VerificÃ¡ que sea un backup de CompaÃ±Ã­a Diaria Silver.';
        }
    };
    reader.readAsText(file);
}
function restablecerApp() {
    if (confirm('Â¿EstÃ¡s seguro/a de borrar TODOS los datos? Esta acciÃ³n NO se puede deshacer.')) {
        localStorage.clear();
        window.location.reload();
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ESTADÃSTICAS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateStats() {
    const el = document.getElementById('stats-text');
    if (!el) return;
    const entries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
    el.innerHTML = `
        Nombre: <strong>${userData.name}</strong><br>
        PaÃ­s: <strong>${userData.country}</strong><br>
        Hemisferio: <strong>${userData.hemisphere === 'south' ? 'Sur' : 'Norte'}</strong><br>
        Visitas totales: <strong>${userData.visitCount || 1}</strong><br>
        Entradas en el diario: <strong>${entries.length}</strong><br>
        Racha actual: <strong>${userData.streak || 1} dÃ­as ğŸ”¥</strong>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MODALES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showTerms()    { document.getElementById('modal-terms').classList.add('show'); }
function showPrivacy()  { document.getElementById('modal-privacy').classList.add('show'); }
function closeModal(id) { document.getElementById(id).classList.remove('show'); }
</script>
</body>
</html>
